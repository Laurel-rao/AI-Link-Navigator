(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[698],{9255:(e,t,s)=>{Promise.resolve().then(s.bind(s,5317))},5317:(e,t,s)=>{"use strict";s.d(t,{AdminDashboard:()=>w});var l=s(5880),i=s(6292),a=s(7045),r=s(1954),n=s(3509),o=s(1654),d=s(7695),c=s(9199),u=class extends d.Q{#e;#t=void 0;#s;#l;constructor(e,t){super(),this.#e=e,this.setOptions(t),this.bindMethods(),this.#i()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(e){let t=this.options;this.options=this.#e.defaultMutationOptions(e),(0,c.f8)(this.options,t)||this.#e.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#s,observer:this}),t?.mutationKey&&this.options.mutationKey&&(0,c.EN)(t.mutationKey)!==(0,c.EN)(this.options.mutationKey)?this.reset():this.#s?.state.status==="pending"&&this.#s.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#s?.removeObserver(this)}onMutationUpdate(e){this.#i(),this.#a(e)}getCurrentResult(){return this.#t}reset(){this.#s?.removeObserver(this),this.#s=void 0,this.#i(),this.#a()}mutate(e,t){return this.#l=t,this.#s?.removeObserver(this),this.#s=this.#e.getMutationCache().build(this.#e,this.options),this.#s.addObserver(this),this.#s.execute(e)}#i(){let e=this.#s?.state??(0,n.$)();this.#t={...e,isPending:"pending"===e.status,isSuccess:"success"===e.status,isError:"error"===e.status,isIdle:"idle"===e.status,mutate:this.mutate,reset:this.reset}}#a(e){o.jG.batch(()=>{if(this.#l&&this.hasListeners()){let t=this.#t.variables,s=this.#t.context;e?.type==="success"?(this.#l.onSuccess?.(e.data,t,s),this.#l.onSettled?.(e.data,null,t,s)):e?.type==="error"&&(this.#l.onError?.(e.error,t,s),this.#l.onSettled?.(void 0,e.error,t,s))}this.listeners.forEach(e=>{e(this.#t)})})}};function h(e,t){let s=(0,a.jE)(t),[l]=i.useState(()=>new u(s,e));i.useEffect(()=>{l.setOptions(e)},[l,e]);let r=i.useSyncExternalStore(i.useCallback(e=>l.subscribe(o.jG.batchCalls(e)),[l]),()=>l.getCurrentResult(),()=>l.getCurrentResult()),n=i.useCallback((e,t)=>{l.mutate(e,t).catch(c.lQ)},[l]);if(r.error&&(0,c.GU)(l.options.throwOnError,[r.error]))throw r.error;return{...r,mutate:n,mutateAsync:r.mutate}}var x=s(4540);function m(e){let{text:t,searchQuery:s,className:i="",highlightClassName:a="bg-yellow-300 text-yellow-900 px-1 rounded font-semibold"}=e;if(!s||!t)return(0,l.jsx)("span",{className:i,children:t});let r=t.toLowerCase(),n=s.toLowerCase();if(!r.includes(n))return(0,l.jsx)("span",{className:i,children:t});let o=[],d=0,c=r.indexOf(n,d),u=0;for(;-1!==c;)c>d&&o.push((0,l.jsx)("span",{children:t.slice(d,c)},"normal-".concat(u++))),o.push((0,l.jsx)("span",{className:a,children:t.slice(c,c+s.length)},"highlight-".concat(u++))),d=c+s.length,c=r.indexOf(n,d);return d<t.length&&o.push((0,l.jsx)("span",{children:t.slice(d)},"normal-".concat(u++))),(0,l.jsx)("span",{className:i,children:o})}function p(e){let{searchQuery:t}=e,[s,n]=(0,i.useState)(!1),[o,d]=(0,i.useState)(null),[c,u]=(0,i.useState)(null),[p,b]=(0,i.useState)(null),[g,v]=(0,i.useState)({id:"",title:"",description:"",order:0}),[j,y]=(0,i.useState)({id:"",title:"",url:"",description:"",order:0,groupId:""}),[w,_]=(0,i.useState)({title:"",description:"",order:0}),[f,N]=(0,i.useState)({title:"",url:"",description:"",order:0}),k=(0,a.jE)(),{data:C=[],isLoading:S}=(0,r.I)({queryKey:["groups"],queryFn:async()=>(await x.GA.getGroups()).data.data}),R=h({mutationFn:x.GA.createGroup,onSuccess:()=>{k.invalidateQueries({queryKey:["groups"]}),n(!1),v({id:"",title:"",description:"",order:0})}}),L=h({mutationFn:e=>{let{id:t,data:s}=e;return x.GA.updateGroup(t,s)},onSuccess:()=>{k.invalidateQueries({queryKey:["groups"]}),u(null)}}),M=h({mutationFn:x.v_.createLink,onSuccess:()=>{k.invalidateQueries({queryKey:["groups"]}),d(null),y({id:"",title:"",url:"",description:"",order:0,groupId:""})}}),z=h({mutationFn:e=>{let{id:t,data:s}=e;return x.v_.updateLink(t,s)},onSuccess:()=>{k.invalidateQueries({queryKey:["groups"]}),b(null)}}),A=h({mutationFn:x.GA.deleteGroup,onSuccess:()=>{k.invalidateQueries({queryKey:["groups"]})}}),E=h({mutationFn:x.v_.deleteLink,onSuccess:()=>{k.invalidateQueries({queryKey:["groups"]})}}),I=e=>{e.preventDefault(),c&&L.mutate({id:c,data:w})},P=e=>{e.preventDefault(),M.mutate(j)},q=e=>{e.preventDefault(),p&&z.mutate({id:p,data:f})},O=e=>{u(e.id),_({title:e.title,description:e.description||"",order:e.order})},Q=e=>{b(e.id),N({title:e.title,url:e.url,description:e.description||"",order:e.order})},U=C.filter(e=>{var s;return""===t||e.title.toLowerCase().includes(t.toLowerCase())||(null===(s=e.description)||void 0===s?void 0:s.toLowerCase().includes(t.toLowerCase()))||e.links.some(e=>{var s;return e.title.toLowerCase().includes(t.toLowerCase())||(null===(s=e.description)||void 0===s?void 0:s.toLowerCase().includes(t.toLowerCase()))})});return S?(0,l.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,l.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-500"})}):(0,l.jsxs)("div",{children:[(0,l.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,l.jsx)("h2",{className:"text-xl font-semibold",children:"分组管理"}),(0,l.jsxs)("button",{onClick:()=>n(!0),className:"bg-blue-500 hover:bg-blue-600 px-3 py-1.5 rounded text-sm flex items-center",children:[(0,l.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1",viewBox:"0 0 20 20",fill:"currentColor",children:(0,l.jsx)("path",{fillRule:"evenodd",d:"M10 5a1 1 0 011 1v3h3a1 1 0 110 2h-3v3a1 1 0 11-2 0v-3H6a1 1 0 110-2h3V6a1 1 0 011-1z",clipRule:"evenodd"})}),"添加分组"]})]}),s&&(0,l.jsxs)("div",{className:"mb-6 p-4 bg-slate-700 rounded-lg",children:[(0,l.jsx)("h3",{className:"text-lg font-medium mb-4",children:"添加新分组"}),(0,l.jsxs)("form",{onSubmit:e=>{e.preventDefault(),R.mutate(g)},className:"space-y-4",children:[(0,l.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm text-slate-300 mb-1",children:"分组ID"}),(0,l.jsx)("input",{type:"text",value:g.id,onChange:e=>v({...g,id:e.target.value}),className:"w-full bg-slate-800 border border-slate-600 rounded px-3 py-2 text-white",required:!0})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm text-slate-300 mb-1",children:"标题"}),(0,l.jsx)("input",{type:"text",value:g.title,onChange:e=>v({...g,title:e.target.value}),className:"w-full bg-slate-800 border border-slate-600 rounded px-3 py-2 text-white",required:!0})]})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm text-slate-300 mb-1",children:"描述"}),(0,l.jsx)("input",{type:"text",value:g.description,onChange:e=>v({...g,description:e.target.value}),className:"w-full bg-slate-800 border border-slate-600 rounded px-3 py-2 text-white"})]}),(0,l.jsxs)("div",{className:"flex space-x-2",children:[(0,l.jsx)("button",{type:"submit",disabled:R.isPending,className:"bg-blue-500 hover:bg-blue-600 px-4 py-2 rounded text-sm",children:R.isPending?"创建中...":"创建分组"}),(0,l.jsx)("button",{type:"button",onClick:()=>n(!1),className:"bg-gray-500 hover:bg-gray-600 px-4 py-2 rounded text-sm",children:"取消"})]})]})]}),(0,l.jsx)("div",{className:"space-y-6",children:U.map(e=>(0,l.jsxs)("div",{className:"border border-slate-700 rounded-lg p-4",children:[c===e.id?(0,l.jsxs)("div",{className:"mb-4 p-3 bg-slate-600 rounded",children:[(0,l.jsx)("h4",{className:"text-lg font-medium mb-3",children:"编辑分组"}),(0,l.jsxs)("form",{onSubmit:I,className:"space-y-3",children:[(0,l.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm text-slate-300 mb-1",children:"标题"}),(0,l.jsx)("input",{type:"text",value:w.title,onChange:e=>_({...w,title:e.target.value}),className:"w-full bg-slate-800 border border-slate-600 rounded px-3 py-2 text-white",required:!0})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm text-slate-300 mb-1",children:"排序"}),(0,l.jsx)("input",{type:"number",value:w.order,onChange:e=>_({...w,order:parseInt(e.target.value)}),className:"w-full bg-slate-800 border border-slate-600 rounded px-3 py-2 text-white"})]})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm text-slate-300 mb-1",children:"描述"}),(0,l.jsx)("input",{type:"text",value:w.description,onChange:e=>_({...w,description:e.target.value}),className:"w-full bg-slate-800 border border-slate-600 rounded px-3 py-2 text-white"})]}),(0,l.jsxs)("div",{className:"flex space-x-2",children:[(0,l.jsx)("button",{type:"submit",disabled:L.isPending,className:"bg-green-500 hover:bg-green-600 px-3 py-1 rounded text-sm",children:L.isPending?"保存中...":"保存"}),(0,l.jsx)("button",{type:"button",onClick:()=>u(null),className:"bg-gray-500 hover:bg-gray-600 px-3 py-1 rounded text-sm",children:"取消"})]})]})]}):(0,l.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("h3",{className:"text-xl font-bold",children:(0,l.jsx)(m,{text:e.title,searchQuery:t,className:"text-xl font-bold"})}),e.description&&(0,l.jsx)("p",{className:"text-slate-400 text-base mt-1",children:(0,l.jsx)(m,{text:e.description,searchQuery:t,className:"text-base"})})]}),(0,l.jsxs)("div",{className:"flex space-x-2",children:[(0,l.jsx)("button",{onClick:()=>O(e),className:"bg-yellow-500 hover:bg-yellow-600 px-2 py-1 rounded text-xs",children:"编辑分组"}),(0,l.jsx)("button",{onClick:()=>{y({...j,groupId:e.id}),d(e.id)},className:"bg-green-500 hover:bg-green-600 px-2 py-1 rounded text-xs",children:"添加链接"}),(0,l.jsx)("button",{onClick:()=>A.mutate(e.id),className:"bg-red-500 hover:bg-red-600 px-2 py-1 rounded text-xs",children:"删除分组"})]})]}),o===e.id&&(0,l.jsxs)("div",{className:"mb-4 p-3 bg-slate-600 rounded",children:[(0,l.jsx)("h4",{className:"text-lg font-medium mb-3",children:"添加新链接"}),(0,l.jsxs)("form",{onSubmit:P,className:"space-y-3",children:[(0,l.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm text-slate-300 mb-1",children:"链接ID"}),(0,l.jsx)("input",{type:"text",value:j.id,onChange:e=>y({...j,id:e.target.value}),className:"w-full bg-slate-800 border border-slate-600 rounded px-3 py-2 text-white",required:!0})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm text-slate-300 mb-1",children:"标题"}),(0,l.jsx)("input",{type:"text",value:j.title,onChange:e=>y({...j,title:e.target.value}),className:"w-full bg-slate-800 border border-slate-600 rounded px-3 py-2 text-white",required:!0})]})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm text-slate-300 mb-1",children:"URL"}),(0,l.jsx)("input",{type:"url",value:j.url,onChange:e=>y({...j,url:e.target.value}),className:"w-full bg-slate-800 border border-slate-600 rounded px-3 py-2 text-white",required:!0})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm text-slate-300 mb-1",children:"描述"}),(0,l.jsx)("input",{type:"text",value:j.description,onChange:e=>y({...j,description:e.target.value}),className:"w-full bg-slate-800 border border-slate-600 rounded px-3 py-2 text-white"})]}),(0,l.jsxs)("div",{className:"flex space-x-2",children:[(0,l.jsx)("button",{type:"submit",disabled:M.isPending,className:"bg-green-500 hover:bg-green-600 px-3 py-1 rounded text-sm",children:M.isPending?"创建中...":"创建链接"}),(0,l.jsx)("button",{type:"button",onClick:()=>d(null),className:"bg-gray-500 hover:bg-gray-600 px-3 py-1 rounded text-sm",children:"取消"})]})]})]}),(0,l.jsx)("div",{className:"space-y-3",children:e.links.map(e=>(0,l.jsx)("div",{className:"p-3 bg-slate-700 rounded",children:p===e.id?(0,l.jsxs)("div",{className:"p-3 bg-slate-600 rounded",children:[(0,l.jsx)("h5",{className:"text-base font-medium mb-3",children:"编辑链接"}),(0,l.jsxs)("form",{onSubmit:q,className:"space-y-3",children:[(0,l.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm text-slate-300 mb-1",children:"标题"}),(0,l.jsx)("input",{type:"text",value:f.title,onChange:e=>N({...f,title:e.target.value}),className:"w-full bg-slate-800 border border-slate-600 rounded px-3 py-2 text-white",required:!0})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm text-slate-300 mb-1",children:"排序"}),(0,l.jsx)("input",{type:"number",value:f.order,onChange:e=>N({...f,order:parseInt(e.target.value)}),className:"w-full bg-slate-800 border border-slate-600 rounded px-3 py-2 text-white"})]})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm text-slate-300 mb-1",children:"URL"}),(0,l.jsx)("input",{type:"url",value:f.url,onChange:e=>N({...f,url:e.target.value}),className:"w-full bg-slate-800 border border-slate-600 rounded px-3 py-2 text-white",required:!0})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm text-slate-300 mb-1",children:"描述"}),(0,l.jsx)("input",{type:"text",value:f.description,onChange:e=>N({...f,description:e.target.value}),className:"w-full bg-slate-800 border border-slate-600 rounded px-3 py-2 text-white"})]}),(0,l.jsxs)("div",{className:"flex space-x-2",children:[(0,l.jsx)("button",{type:"submit",disabled:z.isPending,className:"bg-green-500 hover:bg-green-600 px-3 py-1 rounded text-sm",children:z.isPending?"保存中...":"保存"}),(0,l.jsx)("button",{type:"button",onClick:()=>b(null),className:"bg-gray-500 hover:bg-gray-600 px-3 py-1 rounded text-sm",children:"取消"})]})]})]}):(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsxs)("div",{className:"flex-1",children:[(0,l.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,l.jsx)("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",className:"text-blue-400 hover:text-blue-300 font-semibold text-base",children:(0,l.jsx)(m,{text:e.title,searchQuery:t,className:"text-base font-semibold"})}),(0,l.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 text-slate-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,l.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})})]}),e.description&&(0,l.jsx)("p",{className:"text-slate-400 text-sm mt-1",children:(0,l.jsx)(m,{text:e.description,searchQuery:t,className:"text-sm"})})]}),(0,l.jsxs)("div",{className:"flex space-x-1",children:[(0,l.jsx)("button",{onClick:()=>Q(e),className:"bg-yellow-500 hover:bg-yellow-600 px-2 py-1 rounded text-xs",children:"编辑"}),(0,l.jsx)("button",{onClick:()=>E.mutate(e.id),className:"bg-red-500 hover:bg-red-600 px-2 py-1 rounded text-xs",children:"删除"})]})]})},e.id))})]},e.id))}),0===U.length&&(0,l.jsx)("p",{className:"text-slate-400 text-center py-4",children:t?"未找到匹配的结果。":"暂无分组数据。"})]})}function b(e){let{searchQuery:t}=e,[s,n]=(0,i.useState)(!1),[o,d]=(0,i.useState)(null),[c,u]=(0,i.useState)(!1),[p,b]=(0,i.useState)({username:"",password:"",role:"USER"}),[g,v]=(0,i.useState)({role:"USER",password:""}),j=(0,a.jE)(),{data:y=[],isLoading:w}=(0,r.I)({queryKey:["users"],queryFn:async()=>(await x.i$.getUsers()).data.data}),_=h({mutationFn:x.i$.createUser,onSuccess:()=>{j.invalidateQueries({queryKey:["users"]}),n(!1),b({username:"",password:"",role:"USER"})}}),f=h({mutationFn:e=>{let{username:t,data:s}=e;return x.i$.updateUser(t,s)},onSuccess:()=>{j.invalidateQueries({queryKey:["users"]}),d(null),u(!1)}}),N=h({mutationFn:x.i$.deleteUser,onSuccess:()=>{j.invalidateQueries({queryKey:["users"]})}}),k=e=>{if(e.preventDefault(),o){let e={role:g.role};c&&g.password&&""!==g.password.trim()&&(e.password=g.password),f.mutate({username:o,data:e})}},C=e=>{d(e.username),v({role:e.role,password:""}),u(!1)},S=y.filter(e=>""===t||e.username.toLowerCase().includes(t.toLowerCase())||e.role.toLowerCase().includes(t.toLowerCase()));return w?(0,l.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,l.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-500"})}):(0,l.jsxs)("div",{children:[(0,l.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,l.jsx)("h2",{className:"text-xl font-semibold",children:"用户账户管理"}),(0,l.jsxs)("button",{onClick:()=>n(!0),className:"bg-purple-500 hover:bg-purple-600 px-3 py-1.5 rounded text-sm flex items-center",children:[(0,l.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1",viewBox:"0 0 20 20",fill:"currentColor",children:(0,l.jsx)("path",{fillRule:"evenodd",d:"M10 5a1 1 0 011 1v3h3a1 1 0 110 2h-3v3a1 1 0 11-2 0v-3H6a1 1 0 110-2h3V6a1 1 0 011-1z",clipRule:"evenodd"})}),"添加用户"]})]}),s&&(0,l.jsxs)("div",{className:"mb-8 p-4 bg-slate-700 rounded-lg shadow-lg",children:[(0,l.jsxs)("div",{className:"flex justify-between items-center mb-3",children:[(0,l.jsx)("h3",{className:"text-lg font-medium text-blue-400",children:"添加新用户"}),(0,l.jsx)("button",{onClick:()=>n(!1),className:"text-slate-400 hover:text-white",children:"\xd7"})]}),(0,l.jsxs)("form",{onSubmit:e=>{e.preventDefault(),_.mutate(p)},className:"space-y-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm text-slate-300",children:"用户名"}),(0,l.jsx)("input",{type:"text",value:p.username,onChange:e=>b({...p,username:e.target.value}),required:!0,className:"mt-1 w-full bg-slate-800 border-slate-600 rounded px-3 py-2 text-white"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm text-slate-300",children:"密码"}),(0,l.jsx)("input",{type:"password",value:p.password,onChange:e=>b({...p,password:e.target.value}),required:!0,className:"mt-1 w-full bg-slate-800 border-slate-600 rounded px-3 py-2 text-white"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm text-slate-300",children:"角色"}),(0,l.jsxs)("select",{value:p.role,onChange:e=>b({...p,role:e.target.value}),className:"mt-1 w-full bg-slate-800 border-slate-600 rounded px-3 py-2 text-white",children:[(0,l.jsx)("option",{value:"USER",children:"普通用户 (User)"}),(0,l.jsx)("option",{value:"ADMIN",children:"管理员 (Admin)"})]})]}),(0,l.jsx)("button",{type:"submit",disabled:_.isPending,className:"bg-blue-500 hover:bg-blue-600 px-4 py-2 rounded text-sm",children:_.isPending?"创建中...":"创建用户"}),_.error&&(0,l.jsx)("p",{className:"text-red-400 text-sm mt-2",children:_.error.message})]})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("h3",{className:"text-lg font-medium mb-3 text-blue-400",children:"现有用户列表"}),(0,l.jsx)("div",{className:"space-y-4",children:S.map(e=>(0,l.jsx)("div",{className:"p-4 bg-slate-700 rounded-lg",children:o===e.username?(0,l.jsxs)("div",{className:"p-3 bg-slate-600 rounded",children:[(0,l.jsxs)("h4",{className:"text-lg font-medium mb-3 text-blue-400",children:["编辑用户:",(0,l.jsx)(m,{text:e.username,searchQuery:t,className:"ml-2 text-lg font-medium"})]}),(0,l.jsxs)("form",{onSubmit:k,className:"space-y-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm text-slate-300 mb-2",children:"角色"}),(0,l.jsxs)("select",{value:g.role,onChange:e=>v({...g,role:e.target.value}),className:"w-full bg-slate-800 border border-slate-600 rounded px-3 py-2 text-white",children:[(0,l.jsx)("option",{value:"USER",children:"普通用户 (User)"}),(0,l.jsx)("option",{value:"ADMIN",children:"管理员 (Admin)"})]})]}),(0,l.jsxs)("div",{children:[(0,l.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,l.jsx)("label",{className:"block text-sm text-slate-300",children:"密码"}),(0,l.jsx)("button",{type:"button",onClick:()=>u(!c),className:"text-xs text-blue-400 hover:text-blue-300",children:c?"取消修改密码":"修改密码"})]}),c&&(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)("input",{type:"password",value:g.password,onChange:e=>v({...g,password:e.target.value}),placeholder:"输入新密码（留空表示不修改）",className:"w-full bg-slate-800 border border-slate-600 rounded px-3 py-2 text-white"}),(0,l.jsx)("p",{className:"text-xs text-slate-400",children:"⚠️ 管理员权限：修改密码将影响用户登录，请谨慎操作"})]})]}),(0,l.jsxs)("div",{className:"flex space-x-2",children:[(0,l.jsx)("button",{type:"submit",disabled:f.isPending,className:"bg-green-500 hover:bg-green-600 px-4 py-2 rounded text-sm",children:f.isPending?"保存中...":"保存"}),(0,l.jsx)("button",{type:"button",onClick:()=>{d(null),u(!1)},className:"bg-gray-500 hover:bg-gray-600 px-4 py-2 rounded text-sm",children:"取消"})]})]}),f.error&&(0,l.jsx)("p",{className:"text-red-400 text-sm mt-2",children:f.error.message})]}):(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,l.jsx)("div",{className:"w-12 h-12 bg-slate-600 rounded-full flex items-center justify-center",children:(0,l.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-slate-300",viewBox:"0 0 20 20",fill:"currentColor",children:(0,l.jsx)("path",{fillRule:"evenodd",d:"M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z",clipRule:"evenodd"})})}),(0,l.jsxs)("div",{children:[(0,l.jsx)("h4",{className:"font-bold text-white text-lg",children:(0,l.jsx)(m,{text:e.username,searchQuery:t,className:"text-lg font-bold"})}),(0,l.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,l.jsx)("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium ".concat("ADMIN"===e.role?"bg-purple-100 text-purple-800":"bg-blue-100 text-blue-800"),children:(0,l.jsx)(m,{text:"ADMIN"===e.role?"管理员":"普通用户",searchQuery:t,className:"text-sm font-medium"})}),(0,l.jsxs)("span",{className:"text-slate-400 text-sm",children:["创建于 ",new Date(e.createdAt).toLocaleDateString()]})]})]})]}),(0,l.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,l.jsxs)("button",{onClick:()=>C(e),className:"bg-yellow-500 hover:bg-yellow-600 px-3 py-1 rounded text-sm flex items-center",children:[(0,l.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3 w-3 mr-1",viewBox:"0 0 20 20",fill:"currentColor",children:(0,l.jsx)("path",{d:"M13.586 3.586a2 2 0 112.828 2.828l-.793.793-2.828-2.828.793-.793zM11.379 5.793L3 14.172V17h2.828l8.38-8.379-2.83-2.828z"})}),"编辑"]}),(0,l.jsxs)("button",{onClick:()=>N.mutate(e.username),disabled:N.isPending,className:"bg-red-500 hover:bg-red-600 px-3 py-1 rounded text-sm flex items-center",children:[(0,l.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3 w-3 mr-1",viewBox:"0 0 20 20",fill:"currentColor",children:[(0,l.jsx)("path",{fillRule:"evenodd",d:"M9 2a1 1 0 000 2h2a1 1 0 100-2H9z",clipRule:"evenodd"}),(0,l.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})]}),"删除"]})]})]})},e.id))}),0===S.length&&(0,l.jsx)("p",{className:"text-slate-400 text-center py-4 text-lg",children:t?(0,l.jsxs)(l.Fragment,{children:['未找到匹配 "',(0,l.jsx)("span",{className:"bg-yellow-300 text-yellow-900 px-1 rounded font-semibold",children:t}),'" 的用户。']}):"暂无用户数据。"})]}),(0,l.jsx)("div",{className:"mt-6 p-4 bg-yellow-500/10 border border-yellow-500/50 rounded-lg",children:(0,l.jsxs)("div",{className:"flex items-start space-x-2",children:[(0,l.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-yellow-500 mt-0.5",viewBox:"0 0 20 20",fill:"currentColor",children:(0,l.jsx)("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),(0,l.jsxs)("div",{children:[(0,l.jsx)("h4",{className:"text-yellow-500 font-medium text-sm",children:"安全提示"}),(0,l.jsxs)("p",{className:"text-yellow-400 text-xs mt-1",children:["• 只有管理员可以编辑用户信息和密码",(0,l.jsx)("br",{}),"• 修改密码后，该用户需要使用新密码重新登录",(0,l.jsx)("br",{}),"• 删除用户操作不可撤销，请谨慎操作"]})]})]})})]})}function g(e){let{searchQuery:t}=e,[s,n]=(0,i.useState)(!1),[o,d]=(0,i.useState)({site_title:"",site_heading:"",site_subheading:"",nav_welcome_text:"",nav_admin_button:"",nav_logout_button:"",login_title:"",login_subtitle:"",login_username_placeholder:"",login_password_placeholder:"",login_submit_button:"",login_error_invalid:"",login_error_network:"",login_dev_notice_title:"",login_dev_admin_label:"",login_dev_user_label:"",login_copyright:"",signout_title:"",signout_subtitle:"",signout_description:"",signout_confirm_button:"",signout_cancel_button:"",signout_warning:"",signout_loading_text:"",signout_copyright:"",home_section_title:"",admin_title:"",admin_preview_button:"",admin_logout_button:"",loading_text:"",error_text:"",success_text:"",cancel_text:"",confirm_text:"",save_text:"",edit_text:"",delete_text:"",add_text:""}),c=(0,a.jE)(),{data:u,isLoading:p}=(0,r.I)({queryKey:["settings"],queryFn:async()=>(await x.aK.getSettings()).data.data}),b=h({mutationFn:x.aK.updateSettings,onSuccess:()=>{c.invalidateQueries({queryKey:["settings"]}),n(!0),setTimeout(()=>{n(!1)},3e3)}});(0,i.useEffect)(()=>{u&&d({site_title:u.site_title||"",site_heading:u.site_heading||"",site_subheading:u.site_subheading||"",nav_welcome_text:u.nav_welcome_text||"",nav_admin_button:u.nav_admin_button||"",nav_logout_button:u.nav_logout_button||"",login_title:u.login_title||"",login_subtitle:u.login_subtitle||"",login_username_placeholder:u.login_username_placeholder||"",login_password_placeholder:u.login_password_placeholder||"",login_submit_button:u.login_submit_button||"",login_error_invalid:u.login_error_invalid||"",login_error_network:u.login_error_network||"",login_dev_notice_title:u.login_dev_notice_title||"",login_dev_admin_label:u.login_dev_admin_label||"",login_dev_user_label:u.login_dev_user_label||"",login_copyright:u.login_copyright||"",signout_title:u.signout_title||"",signout_subtitle:u.signout_subtitle||"",signout_description:u.signout_description||"",signout_confirm_button:u.signout_confirm_button||"",signout_cancel_button:u.signout_cancel_button||"",signout_warning:u.signout_warning||"",signout_loading_text:u.signout_loading_text||"",signout_copyright:u.signout_copyright||"",home_section_title:u.home_section_title||"",admin_title:u.admin_title||"",admin_preview_button:u.admin_preview_button||"",admin_logout_button:u.admin_logout_button||"",loading_text:u.loading_text||"",error_text:u.error_text||"",success_text:u.success_text||"",cancel_text:u.cancel_text||"",confirm_text:u.confirm_text||"",save_text:u.save_text||"",edit_text:u.edit_text||"",delete_text:u.delete_text||"",add_text:u.add_text||""})},[u]);let g=e=>{e.preventDefault(),b.mutate(o)},v=(e,t)=>{d(s=>({...s,[e]:t}))},j=[{title:"基本站点信息",items:[{key:"site_title",label:"网站标题",description:"显示在浏览器标签页的标题",placeholder:"例如：AI-Link-Navigator - 智能导航站"},{key:"site_heading",label:"网站主标题",description:"显示在网站首页的大标题",placeholder:"例如：AI资源导航"},{key:"site_subheading",label:"网站副标题",description:"显示在主标题下方的描述文字",placeholder:"例如：前沿AI工具与资源的精选集合"}]},{title:"导航栏文字",items:[{key:"nav_welcome_text",label:"欢迎文字",description:"导航栏的欢迎用户文字",placeholder:"例如：欢迎回来"},{key:"nav_admin_button",label:"管理后台按钮",description:"管理后台按钮的文字",placeholder:"例如：管理后台"},{key:"nav_logout_button",label:"退出登录按钮",description:"退出登录按钮的文字",placeholder:"例如：退出登录"}]},{title:"登录页面文字",items:[{key:"login_title",label:"登录页标题",description:"登录页面的主标题",placeholder:"例如：AI导航系统"},{key:"login_subtitle",label:"登录页副标题",description:"登录页面的副标题",placeholder:"例如：智能资源导航平台"},{key:"login_username_placeholder",label:"用户名输入框提示",description:"用户名输入框的占位符文字",placeholder:"例如：请输入用户名"},{key:"login_password_placeholder",label:"密码输入框提示",description:"密码输入框的占位符文字",placeholder:"例如：请输入密码"},{key:"login_submit_button",label:"登录按钮文字",description:"登录按钮的文字",placeholder:"例如：立即登录"},{key:"login_error_invalid",label:"登录错误提示",description:"用户名或密码错误时的提示",placeholder:"例如：用户名或密码错误"},{key:"login_error_network",label:"网络错误提示",description:"网络错误时的提示",placeholder:"例如：登录过程中发生错误，请稍后重试"},{key:"login_dev_notice_title",label:"开发环境提示标题",description:"开发环境测试账号提示的标题",placeholder:"例如：开发环境 - 测试账号"},{key:"login_dev_admin_label",label:"测试管理员账号标签",description:"测试管理员账号的标签",placeholder:"例如：管理员"},{key:"login_dev_user_label",label:"测试用户账号标签",description:"测试用户账号的标签",placeholder:"例如：用户"},{key:"login_copyright",label:"登录页版权信息",description:"登录页面底部的版权信息",placeholder:"例如：\xa9 2024 AI-Link-Navigator. 现代化智能导航平台"}]},{title:"退出登录页面文字",items:[{key:"signout_title",label:"退出确认标题",description:"退出登录确认页面的标题",placeholder:"例如：退出确认"},{key:"signout_subtitle",label:"退出确认副标题",description:"退出登录确认页面的副标题",placeholder:"例如：您确定要退出登录吗？"},{key:"signout_description",label:"退出说明文字",description:"退出登录的说明文字",placeholder:"例如：退出后您需要重新登录才能访问系统"},{key:"signout_confirm_button",label:"确认退出按钮",description:"确认退出按钮的文字",placeholder:"例如：确认退出"},{key:"signout_cancel_button",label:"取消退出按钮",description:"取消退出按钮的文字",placeholder:"例如：取消"},{key:"signout_warning",label:"退出警告信息",description:"退出时的警告信息",placeholder:"例如：退出后所有未保存的数据将丢失"},{key:"signout_loading_text",label:"退出中文字",description:"正在退出时显示的文字",placeholder:"例如：正在退出..."},{key:"signout_copyright",label:"退出页版权信息",description:"退出页面底部的版权信息",placeholder:"例如：\xa9 2024 AI-Link-Navigator. 安全退出系统"}]},{title:"主页文字",items:[{key:"home_section_title",label:"资源分类标题",description:"主页资源分类部分的标题",placeholder:"例如：资源分类"}]},{title:"管理后台文字",items:[{key:"admin_title",label:"管理后台标题",description:"管理后台页面的标题",placeholder:"例如：AI导航管理后台"},{key:"admin_preview_button",label:"预览网站按钮",description:"预览网站按钮的文字",placeholder:"例如：预览网站"},{key:"admin_logout_button",label:"管理后台退出按钮",description:"管理后台退出登录按钮的文字",placeholder:"例如：退出登录"}]},{title:"通用文字",items:[{key:"loading_text",label:"加载中文字",description:"页面加载时显示的文字",placeholder:"例如：加载中..."},{key:"error_text",label:"错误提示文字",description:"一般错误提示的文字",placeholder:"例如：发生错误"},{key:"success_text",label:"成功提示文字",description:"操作成功提示的文字",placeholder:"例如：操作成功"},{key:"cancel_text",label:"取消按钮文字",description:"取消按钮的文字",placeholder:"例如：取消"},{key:"confirm_text",label:"确认按钮文字",description:"确认按钮的文字",placeholder:"例如：确认"},{key:"save_text",label:"保存按钮文字",description:"保存按钮的文字",placeholder:"例如：保存"},{key:"edit_text",label:"编辑按钮文字",description:"编辑按钮的文字",placeholder:"例如：编辑"},{key:"delete_text",label:"删除按钮文字",description:"删除按钮的文字",placeholder:"例如：删除"},{key:"add_text",label:"添加按钮文字",description:"添加按钮的文字",placeholder:"例如：添加"}]}].map(e=>({...e,items:e.items.filter(e=>{if(!t)return!0;let s=t.toLowerCase();return e.label.toLowerCase().includes(s)||e.description.toLowerCase().includes(s)||o[e.key]&&o[e.key].toLowerCase().includes(s)})})).filter(e=>e.items.length>0);return p?(0,l.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,l.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-500"})}):(0,l.jsxs)("div",{className:"relative",children:[(0,l.jsxs)("div",{className:"mb-6",children:[(0,l.jsx)("h2",{className:"text-xl font-semibold mb-2",children:"网站文字设置"}),(0,l.jsx)("p",{className:"text-slate-400 text-base",children:"配置网站各个页面的文字内容，这些设置会立即应用到对应页面上"})]}),(0,l.jsxs)("form",{onSubmit:g,className:"space-y-8 pb-20",children:[j.map(e=>(0,l.jsxs)("div",{className:"p-6 bg-slate-700 rounded-lg border border-slate-600",children:[(0,l.jsxs)("h3",{className:"text-lg font-semibold text-white mb-4 flex items-center",children:[(0,l.jsx)("div",{className:"w-1 h-5 bg-gradient-to-b from-blue-400 to-purple-500 rounded-full mr-3"}),e.title]}),(0,l.jsx)("div",{className:"space-y-4",children:e.items.map(e=>(0,l.jsxs)("div",{className:"p-4 bg-slate-800 rounded-lg",children:[(0,l.jsxs)("div",{className:"mb-3",children:[(0,l.jsx)("label",{className:"block text-base font-semibold text-white mb-1",children:(0,l.jsx)(m,{text:e.label,searchQuery:t,className:"text-base font-semibold"})}),(0,l.jsx)("p",{className:"text-slate-400 text-sm",children:(0,l.jsx)(m,{text:e.description,searchQuery:t,className:"text-sm"})})]}),(0,l.jsx)("input",{type:"text",value:o[e.key]||"",onChange:t=>v(e.key,t.target.value),placeholder:e.placeholder,className:"w-full bg-slate-900 border border-slate-600 rounded-lg px-4 py-3 text-white text-sm placeholder-slate-400 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none"}),o[e.key]&&(0,l.jsxs)("div",{className:"mt-2 p-3 bg-slate-600 rounded border-l-4 border-blue-500",children:[(0,l.jsx)("p",{className:"text-slate-300 text-xs mb-1",children:"当前值预览："}),(0,l.jsx)("p",{className:"text-white text-sm font-medium",children:(0,l.jsx)(m,{text:o[e.key]||"",searchQuery:t,className:"text-sm font-medium"})})]})]},e.key))})]},e.title)),0===j.length&&(0,l.jsx)("div",{className:"text-center py-8",children:(0,l.jsxs)("p",{className:"text-slate-400 text-lg",children:['未找到匹配 "',(0,l.jsx)("span",{className:"bg-yellow-300 text-yellow-900 px-1 rounded font-semibold",children:t}),'" 的设置项。']})}),s&&(0,l.jsxs)("div",{className:"fixed top-4 right-4 z-50 p-4 bg-green-500 text-white rounded-lg shadow-lg flex items-center animate-fade-in",children:[(0,l.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",viewBox:"0 0 20 20",fill:"currentColor",children:(0,l.jsx)("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}),(0,l.jsx)("span",{className:"font-medium",children:"设置已成功保存！"}),(0,l.jsx)("button",{onClick:()=>n(!1),className:"ml-4 text-white hover:text-green-200",children:(0,l.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor",children:(0,l.jsx)("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]}),b.isError&&(0,l.jsx)("div",{className:"p-4 bg-red-500/10 border border-red-500/50 rounded-lg",children:(0,l.jsxs)("div",{className:"flex items-center",children:[(0,l.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-red-500 mr-2",viewBox:"0 0 20 20",fill:"currentColor",children:(0,l.jsx)("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),(0,l.jsx)("span",{className:"text-red-400 font-medium",children:"保存失败，请稍后重试"})]})})]}),j.length>0&&(0,l.jsx)("div",{className:"fixed right-6 bottom-6 z-50",children:(0,l.jsx)("button",{type:"submit",form:"settings-form",onClick:g,disabled:b.isPending,className:"bg-blue-500 hover:bg-blue-600 disabled:opacity-50 px-6 py-4 rounded-full text-white font-medium flex items-center shadow-lg hover:shadow-xl transition-all duration-200 transform hover:scale-105",children:b.isPending?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,l.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,l.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"保存中..."]}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",viewBox:"0 0 20 20",fill:"currentColor",children:(0,l.jsx)("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}),"保存设置"]})})})]})}var v=s(272),j=s.n(v);async function y(){try{let e=await fetch("/api/settings");return(await e.json()).data||{}}catch(e){return console.error("Failed to fetch settings:",e),{}}}function w(){let[e,t]=(0,i.useState)("links"),[s,a]=(0,i.useState)(""),[r,n]=(0,i.useState)({});return(0,i.useEffect)(()=>{y().then(n)},[]),(0,l.jsxs)("div",{className:"max-w-6xl mx-auto p-6 md:p-8",children:[(0,l.jsxs)("header",{className:"mb-8",children:[(0,l.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,l.jsx)("h1",{className:"text-3xl font-bold",children:r.admin_title||"AI导航管理后台"}),(0,l.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,l.jsxs)(j(),{href:"/",className:"text-blue-400 hover:text-blue-300 flex items-center",target:"_blank",rel:"noopener noreferrer",children:[(0,l.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1",viewBox:"0 0 20 20",fill:"currentColor",children:[(0,l.jsx)("path",{d:"M10 12a2 2 0 100-4 2 2 0 000 4z"}),(0,l.jsx)("path",{fillRule:"evenodd",d:"M.458 10C1.732 5.943 5.522 3 10 3s8.268 2.943 9.542 7c-1.274 4.057-5.064 7-9.542 7S1.732 14.057.458 10zM14 10a4 4 0 11-8 0 4 4 0 018 0z",clipRule:"evenodd"})]}),r.admin_preview_button||"预览网站"]}),(0,l.jsxs)(j(),{href:"/api/auth/signout",className:"text-red-400 hover:text-red-300 flex items-center",children:[(0,l.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1",viewBox:"0 0 20 20",fill:"currentColor",children:(0,l.jsx)("path",{fillRule:"evenodd",d:"M3 3a1 1 0 00-1 1v12a1 1 0 102 0V4a1 1 0 00-1-1zm10.293 9.293a1 1 0 001.414 1.414l3-3a1 1 0 000-1.414l-3-3a1 1 0 10-1.414 1.414L14.586 9H7a1 1 0 100 2h7.586l-1.293 1.293z",clipRule:"evenodd"})}),r.admin_logout_button||"退出登录"]})]})]}),(0,l.jsx)("div",{className:"mb-6",children:(0,l.jsx)("input",{type:"text",placeholder:"在当前标签页内搜索...",value:s,onChange:e=>a(e.target.value),className:"w-full bg-slate-800 border border-slate-600 rounded px-4 py-2 text-white placeholder-slate-400 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none"})})]}),(0,l.jsx)("div",{className:"mb-6 border-b border-slate-700",children:[{id:"links",label:"链接管理"},{id:"users",label:"用户管理"},{id:"settings",label:"网站文字设置"}].map(s=>(0,l.jsx)("button",{onClick:()=>t(s.id),className:"px-4 py-2 mr-2 rounded-t-md transition-colors ".concat(e===s.id?"bg-slate-800 text-white border-b-2 border-blue-500":"bg-slate-600 text-slate-300 hover:bg-slate-500"),children:s.label},s.id))}),(0,l.jsxs)("main",{className:"bg-slate-800 rounded-xl p-6",children:["links"===e&&(0,l.jsx)(p,{searchQuery:s}),"users"===e&&(0,l.jsx)(b,{searchQuery:s}),"settings"===e&&(0,l.jsx)(g,{searchQuery:s})]})]})}},4540:(e,t,s)=>{"use strict";s.d(t,{GA:()=>a,aK:()=>n,i$:()=>i,v_:()=>r});let l=s(1719).A.create({baseURL:"/api",timeout:1e4});l.interceptors.response.use(e=>e,e=>{var t;return(null===(t=e.response)||void 0===t?void 0:t.status)===401&&(window.location.href="/auth/login"),Promise.reject(e)});let i={getUsers:()=>l.get("/users"),createUser:e=>l.post("/users",e),updateUser:(e,t)=>l.put("/users/".concat(e),t),deleteUser:e=>l.delete("/users/".concat(e))},a={getGroups:()=>l.get("/groups"),createGroup:e=>l.post("/groups",e),updateGroup:(e,t)=>l.put("/groups/".concat(e),t),deleteGroup:e=>l.delete("/groups/".concat(e))},r={createLink:e=>l.post("/links",e),updateLink:(e,t)=>l.put("/links/".concat(e),t),deleteLink:e=>l.delete("/links/".concat(e))},n={getSettings:()=>l.get("/settings"),updateSettings:e=>l.post("/settings",e)}},3509:(e,t,s)=>{"use strict";s.d(t,{$:()=>n,s:()=>r});var l=s(1654),i=s(543),a=s(6071),r=class extends i.k{#r;#n;#o;constructor(e){super(),this.mutationId=e.mutationId,this.#n=e.mutationCache,this.#r=[],this.state=e.state||n(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){this.#r.includes(e)||(this.#r.push(e),this.clearGcTimeout(),this.#n.notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){this.#r=this.#r.filter(t=>t!==e),this.scheduleGc(),this.#n.notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){this.#r.length||("pending"===this.state.status?this.scheduleGc():this.#n.remove(this))}continue(){return this.#o?.continue()??this.execute(this.state.variables)}async execute(e){let t=()=>{this.#d({type:"continue"})};this.#o=(0,a.II)({fn:()=>this.options.mutationFn?this.options.mutationFn(e):Promise.reject(Error("No mutationFn found")),onFail:(e,t)=>{this.#d({type:"failed",failureCount:e,error:t})},onPause:()=>{this.#d({type:"pause"})},onContinue:t,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#n.canRun(this)});let s="pending"===this.state.status,l=!this.#o.canStart();try{if(s)t();else{this.#d({type:"pending",variables:e,isPaused:l}),await this.#n.config.onMutate?.(e,this);let t=await this.options.onMutate?.(e);t!==this.state.context&&this.#d({type:"pending",context:t,variables:e,isPaused:l})}let i=await this.#o.start();return await this.#n.config.onSuccess?.(i,e,this.state.context,this),await this.options.onSuccess?.(i,e,this.state.context),await this.#n.config.onSettled?.(i,null,this.state.variables,this.state.context,this),await this.options.onSettled?.(i,null,e,this.state.context),this.#d({type:"success",data:i}),i}catch(t){try{throw await this.#n.config.onError?.(t,e,this.state.context,this),await this.options.onError?.(t,e,this.state.context),await this.#n.config.onSettled?.(void 0,t,this.state.variables,this.state.context,this),await this.options.onSettled?.(void 0,t,e,this.state.context),t}finally{this.#d({type:"error",error:t})}}finally{this.#n.runNext(this)}}#d(e){this.state=(t=>{switch(e.type){case"failed":return{...t,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...t,isPaused:!0};case"continue":return{...t,isPaused:!1};case"pending":return{...t,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...t,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...t,data:void 0,error:e.error,failureCount:t.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}})(this.state),l.jG.batch(()=>{this.#r.forEach(t=>{t.onMutationUpdate(e)}),this.#n.notify({mutation:this,type:"updated",action:e})})}};function n(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}}},e=>{var t=t=>e(e.s=t);e.O(0,[754,525,132,27,358],()=>t(9255)),_N_E=e.O()}]);