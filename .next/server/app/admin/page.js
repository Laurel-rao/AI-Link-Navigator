(()=>{var e={};e.id=698,e.ids=[698],e.modules={10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},12412:e=>{"use strict";e.exports=require("assert")},79428:e=>{"use strict";e.exports=require("buffer")},55511:e=>{"use strict";e.exports=require("crypto")},94735:e=>{"use strict";e.exports=require("events")},29021:e=>{"use strict";e.exports=require("fs")},81630:e=>{"use strict";e.exports=require("http")},55591:e=>{"use strict";e.exports=require("https")},21820:e=>{"use strict";e.exports=require("os")},33873:e=>{"use strict";e.exports=require("path")},11723:e=>{"use strict";e.exports=require("querystring")},27910:e=>{"use strict";e.exports=require("stream")},83997:e=>{"use strict";e.exports=require("tty")},79551:e=>{"use strict";e.exports=require("url")},28354:e=>{"use strict";e.exports=require("util")},74075:e=>{"use strict";e.exports=require("zlib")},16662:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>a.a,__next_app__:()=>u,pages:()=>c,routeModule:()=>x,tree:()=>d});var r=s(61179),l=s(17652),i=s(54902),a=s.n(i),n=s(7105),o={};for(let e in n)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>n[e]);s.d(t,o);let d=["",{children:["admin",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,32465)),"/Users/raojiajun/mypro/server/python/AI-Link-Navigator/src/app/admin/page.tsx"]}]},{metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,6019))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(s.bind(s,37774)),"/Users/raojiajun/mypro/server/python/AI-Link-Navigator/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,17458,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(s.t.bind(s,18163,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(s.t.bind(s,56072,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,6019))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],c=["/Users/raojiajun/mypro/server/python/AI-Link-Navigator/src/app/admin/page.tsx"],u={require:s,loadChunk:()=>Promise.resolve()},x=new r.AppPageRouteModule({definition:{kind:l.RouteKind.APP_PAGE,page:"/admin/page",pathname:"/admin",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},12993:(e,t,s)=>{Promise.resolve().then(s.t.bind(s,1152,23)),Promise.resolve().then(s.t.bind(s,9766,23)),Promise.resolve().then(s.t.bind(s,54902,23)),Promise.resolve().then(s.t.bind(s,63905,23)),Promise.resolve().then(s.t.bind(s,51317,23)),Promise.resolve().then(s.t.bind(s,26023,23)),Promise.resolve().then(s.t.bind(s,78412,23))},26145:(e,t,s)=>{Promise.resolve().then(s.t.bind(s,17996,23)),Promise.resolve().then(s.t.bind(s,6050,23)),Promise.resolve().then(s.t.bind(s,73058,23)),Promise.resolve().then(s.t.bind(s,83797,23)),Promise.resolve().then(s.t.bind(s,31025,23)),Promise.resolve().then(s.t.bind(s,1971,23)),Promise.resolve().then(s.t.bind(s,33232,23))},8691:(e,t,s)=>{Promise.resolve().then(s.bind(s,62490))},45643:(e,t,s)=>{Promise.resolve().then(s.bind(s,63494))},62073:(e,t,s)=>{Promise.resolve().then(s.bind(s,20838))},75225:(e,t,s)=>{Promise.resolve().then(s.bind(s,17234))},17234:(e,t,s)=>{"use strict";s.d(t,{AdminDashboard:()=>y});var r=s(76181),l=s(73616),i=s(30235),a=s(32452),n=s(76095),o=s(62150),d=s(32133),c=s(86107),u=class extends d.Q{#e;#t=void 0;#s;#r;constructor(e,t){super(),this.#e=e,this.setOptions(t),this.bindMethods(),this.#l()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(e){let t=this.options;this.options=this.#e.defaultMutationOptions(e),(0,c.f8)(this.options,t)||this.#e.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#s,observer:this}),t?.mutationKey&&this.options.mutationKey&&(0,c.EN)(t.mutationKey)!==(0,c.EN)(this.options.mutationKey)?this.reset():this.#s?.state.status==="pending"&&this.#s.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#s?.removeObserver(this)}onMutationUpdate(e){this.#l(),this.#i(e)}getCurrentResult(){return this.#t}reset(){this.#s?.removeObserver(this),this.#s=void 0,this.#l(),this.#i()}mutate(e,t){return this.#r=t,this.#s?.removeObserver(this),this.#s=this.#e.getMutationCache().build(this.#e,this.options),this.#s.addObserver(this),this.#s.execute(e)}#l(){let e=this.#s?.state??(0,n.$)();this.#t={...e,isPending:"pending"===e.status,isSuccess:"success"===e.status,isError:"error"===e.status,isIdle:"idle"===e.status,mutate:this.mutate,reset:this.reset}}#i(e){o.jG.batch(()=>{if(this.#r&&this.hasListeners()){let t=this.#t.variables,s=this.#t.context;e?.type==="success"?(this.#r.onSuccess?.(e.data,t,s),this.#r.onSettled?.(e.data,null,t,s)):e?.type==="error"&&(this.#r.onError?.(e.error,t,s),this.#r.onSettled?.(void 0,e.error,t,s))}this.listeners.forEach(e=>{e(this.#t)})})}};function x(e,t){let s=(0,i.jE)(t),[r]=l.useState(()=>new u(s,e));l.useEffect(()=>{r.setOptions(e)},[r,e]);let a=l.useSyncExternalStore(l.useCallback(e=>r.subscribe(o.jG.batchCalls(e)),[r]),()=>r.getCurrentResult(),()=>r.getCurrentResult()),n=l.useCallback((e,t)=>{r.mutate(e,t).catch(c.lQ)},[r]);if(a.error&&(0,c.GU)(r.options.throwOnError,[a.error]))throw a.error;return{...a,mutate:n,mutateAsync:a.mutate}}var m=s(40524);function p({text:e,searchQuery:t,className:s="",highlightClassName:l="bg-yellow-300 text-yellow-900 px-1 rounded font-semibold"}){if(!t||!e)return(0,r.jsx)("span",{className:s,children:e});let i=e.toLowerCase(),a=t.toLowerCase();if(!i.includes(a))return(0,r.jsx)("span",{className:s,children:e});let n=[],o=0,d=i.indexOf(a,o),c=0;for(;-1!==d;)d>o&&n.push((0,r.jsx)("span",{children:e.slice(o,d)},`normal-${c++}`)),n.push((0,r.jsx)("span",{className:l,children:e.slice(d,d+t.length)},`highlight-${c++}`)),o=d+t.length,d=i.indexOf(a,o);return o<e.length&&n.push((0,r.jsx)("span",{children:e.slice(o)},`normal-${c++}`)),(0,r.jsx)("span",{className:s,children:n})}function h({searchQuery:e}){let[t,s]=(0,l.useState)(!1),[n,o]=(0,l.useState)(null),[d,c]=(0,l.useState)(null),[u,h]=(0,l.useState)(null),[b,g]=(0,l.useState)({id:"",title:"",description:"",order:0}),[v,j]=(0,l.useState)({id:"",title:"",url:"",description:"",order:0,groupId:""}),[y,w]=(0,l.useState)({title:"",description:"",order:0}),[f,N]=(0,l.useState)({title:"",url:"",description:"",order:0}),_=(0,i.jE)(),{data:k=[],isLoading:C}=(0,a.I)({queryKey:["groups"],queryFn:async()=>(await m.GA.getGroups()).data.data}),P=x({mutationFn:m.GA.createGroup,onSuccess:()=>{_.invalidateQueries({queryKey:["groups"]}),s(!1),g({id:"",title:"",description:"",order:0})}}),S=x({mutationFn:({id:e,data:t})=>m.GA.updateGroup(e,t),onSuccess:()=>{_.invalidateQueries({queryKey:["groups"]}),c(null)}}),L=x({mutationFn:m.v_.createLink,onSuccess:()=>{_.invalidateQueries({queryKey:["groups"]}),o(null),j({id:"",title:"",url:"",description:"",order:0,groupId:""})}}),q=x({mutationFn:({id:e,data:t})=>m.v_.updateLink(e,t),onSuccess:()=>{_.invalidateQueries({queryKey:["groups"]}),h(null)}}),R=x({mutationFn:m.GA.deleteGroup,onSuccess:()=>{_.invalidateQueries({queryKey:["groups"]})}}),M=x({mutationFn:m.v_.deleteLink,onSuccess:()=>{_.invalidateQueries({queryKey:["groups"]})}}),A=e=>{e.preventDefault(),d&&S.mutate({id:d,data:y})},z=e=>{e.preventDefault(),L.mutate(v)},I=e=>{e.preventDefault(),u&&q.mutate({id:u,data:f})},U=e=>{c(e.id),w({title:e.title,description:e.description||"",order:e.order})},E=e=>{h(e.id),N({title:e.title,url:e.url,description:e.description||"",order:e.order})},Q=k.filter(t=>""===e||t.title.toLowerCase().includes(e.toLowerCase())||t.description?.toLowerCase().includes(e.toLowerCase())||t.links.some(t=>t.title.toLowerCase().includes(e.toLowerCase())||t.description?.toLowerCase().includes(e.toLowerCase())));return C?(0,r.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,r.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-500"})}):(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold",children:"分组管理"}),(0,r.jsxs)("button",{onClick:()=>s(!0),className:"bg-blue-500 hover:bg-blue-600 px-3 py-1.5 rounded text-sm flex items-center",children:[(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1",viewBox:"0 0 20 20",fill:"currentColor",children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M10 5a1 1 0 011 1v3h3a1 1 0 110 2h-3v3a1 1 0 11-2 0v-3H6a1 1 0 110-2h3V6a1 1 0 011-1z",clipRule:"evenodd"})}),"添加分组"]})]}),t&&(0,r.jsxs)("div",{className:"mb-6 p-4 bg-slate-700 rounded-lg",children:[(0,r.jsx)("h3",{className:"text-lg font-medium mb-4",children:"添加新分组"}),(0,r.jsxs)("form",{onSubmit:e=>{e.preventDefault(),P.mutate(b)},className:"space-y-4",children:[(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm text-slate-300 mb-1",children:"分组ID"}),(0,r.jsx)("input",{type:"text",value:b.id,onChange:e=>g({...b,id:e.target.value}),className:"w-full bg-slate-800 border border-slate-600 rounded px-3 py-2 text-white",required:!0})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm text-slate-300 mb-1",children:"标题"}),(0,r.jsx)("input",{type:"text",value:b.title,onChange:e=>g({...b,title:e.target.value}),className:"w-full bg-slate-800 border border-slate-600 rounded px-3 py-2 text-white",required:!0})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm text-slate-300 mb-1",children:"描述"}),(0,r.jsx)("input",{type:"text",value:b.description,onChange:e=>g({...b,description:e.target.value}),className:"w-full bg-slate-800 border border-slate-600 rounded px-3 py-2 text-white"})]}),(0,r.jsxs)("div",{className:"flex space-x-2",children:[(0,r.jsx)("button",{type:"submit",disabled:P.isPending,className:"bg-blue-500 hover:bg-blue-600 px-4 py-2 rounded text-sm",children:P.isPending?"创建中...":"创建分组"}),(0,r.jsx)("button",{type:"button",onClick:()=>s(!1),className:"bg-gray-500 hover:bg-gray-600 px-4 py-2 rounded text-sm",children:"取消"})]})]})]}),(0,r.jsx)("div",{className:"space-y-6",children:Q.map(t=>(0,r.jsxs)("div",{className:"border border-slate-700 rounded-lg p-4",children:[d===t.id?(0,r.jsxs)("div",{className:"mb-4 p-3 bg-slate-600 rounded",children:[(0,r.jsx)("h4",{className:"text-lg font-medium mb-3",children:"编辑分组"}),(0,r.jsxs)("form",{onSubmit:A,className:"space-y-3",children:[(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm text-slate-300 mb-1",children:"标题"}),(0,r.jsx)("input",{type:"text",value:y.title,onChange:e=>w({...y,title:e.target.value}),className:"w-full bg-slate-800 border border-slate-600 rounded px-3 py-2 text-white",required:!0})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm text-slate-300 mb-1",children:"排序"}),(0,r.jsx)("input",{type:"number",value:y.order,onChange:e=>w({...y,order:parseInt(e.target.value)}),className:"w-full bg-slate-800 border border-slate-600 rounded px-3 py-2 text-white"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm text-slate-300 mb-1",children:"描述"}),(0,r.jsx)("input",{type:"text",value:y.description,onChange:e=>w({...y,description:e.target.value}),className:"w-full bg-slate-800 border border-slate-600 rounded px-3 py-2 text-white"})]}),(0,r.jsxs)("div",{className:"flex space-x-2",children:[(0,r.jsx)("button",{type:"submit",disabled:S.isPending,className:"bg-green-500 hover:bg-green-600 px-3 py-1 rounded text-sm",children:S.isPending?"保存中...":"保存"}),(0,r.jsx)("button",{type:"button",onClick:()=>c(null),className:"bg-gray-500 hover:bg-gray-600 px-3 py-1 rounded text-sm",children:"取消"})]})]})]}):(0,r.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-xl font-bold",children:(0,r.jsx)(p,{text:t.title,searchQuery:e,className:"text-xl font-bold"})}),t.description&&(0,r.jsx)("p",{className:"text-slate-400 text-base mt-1",children:(0,r.jsx)(p,{text:t.description,searchQuery:e,className:"text-base"})})]}),(0,r.jsxs)("div",{className:"flex space-x-2",children:[(0,r.jsx)("button",{onClick:()=>U(t),className:"bg-yellow-500 hover:bg-yellow-600 px-2 py-1 rounded text-xs",children:"编辑分组"}),(0,r.jsx)("button",{onClick:()=>{j({...v,groupId:t.id}),o(t.id)},className:"bg-green-500 hover:bg-green-600 px-2 py-1 rounded text-xs",children:"添加链接"}),(0,r.jsx)("button",{onClick:()=>R.mutate(t.id),className:"bg-red-500 hover:bg-red-600 px-2 py-1 rounded text-xs",children:"删除分组"})]})]}),n===t.id&&(0,r.jsxs)("div",{className:"mb-4 p-3 bg-slate-600 rounded",children:[(0,r.jsx)("h4",{className:"text-lg font-medium mb-3",children:"添加新链接"}),(0,r.jsxs)("form",{onSubmit:z,className:"space-y-3",children:[(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm text-slate-300 mb-1",children:"链接ID"}),(0,r.jsx)("input",{type:"text",value:v.id,onChange:e=>j({...v,id:e.target.value}),className:"w-full bg-slate-800 border border-slate-600 rounded px-3 py-2 text-white",required:!0})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm text-slate-300 mb-1",children:"标题"}),(0,r.jsx)("input",{type:"text",value:v.title,onChange:e=>j({...v,title:e.target.value}),className:"w-full bg-slate-800 border border-slate-600 rounded px-3 py-2 text-white",required:!0})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm text-slate-300 mb-1",children:"URL"}),(0,r.jsx)("input",{type:"url",value:v.url,onChange:e=>j({...v,url:e.target.value}),className:"w-full bg-slate-800 border border-slate-600 rounded px-3 py-2 text-white",required:!0})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm text-slate-300 mb-1",children:"描述"}),(0,r.jsx)("input",{type:"text",value:v.description,onChange:e=>j({...v,description:e.target.value}),className:"w-full bg-slate-800 border border-slate-600 rounded px-3 py-2 text-white"})]}),(0,r.jsxs)("div",{className:"flex space-x-2",children:[(0,r.jsx)("button",{type:"submit",disabled:L.isPending,className:"bg-green-500 hover:bg-green-600 px-3 py-1 rounded text-sm",children:L.isPending?"创建中...":"创建链接"}),(0,r.jsx)("button",{type:"button",onClick:()=>o(null),className:"bg-gray-500 hover:bg-gray-600 px-3 py-1 rounded text-sm",children:"取消"})]})]})]}),(0,r.jsx)("div",{className:"space-y-3",children:t.links.map(t=>(0,r.jsx)("div",{className:"p-3 bg-slate-700 rounded",children:u===t.id?(0,r.jsxs)("div",{className:"p-3 bg-slate-600 rounded",children:[(0,r.jsx)("h5",{className:"text-base font-medium mb-3",children:"编辑链接"}),(0,r.jsxs)("form",{onSubmit:I,className:"space-y-3",children:[(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm text-slate-300 mb-1",children:"标题"}),(0,r.jsx)("input",{type:"text",value:f.title,onChange:e=>N({...f,title:e.target.value}),className:"w-full bg-slate-800 border border-slate-600 rounded px-3 py-2 text-white",required:!0})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm text-slate-300 mb-1",children:"排序"}),(0,r.jsx)("input",{type:"number",value:f.order,onChange:e=>N({...f,order:parseInt(e.target.value)}),className:"w-full bg-slate-800 border border-slate-600 rounded px-3 py-2 text-white"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm text-slate-300 mb-1",children:"URL"}),(0,r.jsx)("input",{type:"url",value:f.url,onChange:e=>N({...f,url:e.target.value}),className:"w-full bg-slate-800 border border-slate-600 rounded px-3 py-2 text-white",required:!0})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm text-slate-300 mb-1",children:"描述"}),(0,r.jsx)("input",{type:"text",value:f.description,onChange:e=>N({...f,description:e.target.value}),className:"w-full bg-slate-800 border border-slate-600 rounded px-3 py-2 text-white"})]}),(0,r.jsxs)("div",{className:"flex space-x-2",children:[(0,r.jsx)("button",{type:"submit",disabled:q.isPending,className:"bg-green-500 hover:bg-green-600 px-3 py-1 rounded text-sm",children:q.isPending?"保存中...":"保存"}),(0,r.jsx)("button",{type:"button",onClick:()=>h(null),className:"bg-gray-500 hover:bg-gray-600 px-3 py-1 rounded text-sm",children:"取消"})]})]})]}):(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)("a",{href:t.url,target:"_blank",rel:"noopener noreferrer",className:"text-blue-400 hover:text-blue-300 font-semibold text-base",children:(0,r.jsx)(p,{text:t.title,searchQuery:e,className:"text-base font-semibold"})}),(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 text-slate-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})})]}),t.description&&(0,r.jsx)("p",{className:"text-slate-400 text-sm mt-1",children:(0,r.jsx)(p,{text:t.description,searchQuery:e,className:"text-sm"})})]}),(0,r.jsxs)("div",{className:"flex space-x-1",children:[(0,r.jsx)("button",{onClick:()=>E(t),className:"bg-yellow-500 hover:bg-yellow-600 px-2 py-1 rounded text-xs",children:"编辑"}),(0,r.jsx)("button",{onClick:()=>M.mutate(t.id),className:"bg-red-500 hover:bg-red-600 px-2 py-1 rounded text-xs",children:"删除"})]})]})},t.id))})]},t.id))}),0===Q.length&&(0,r.jsx)("p",{className:"text-slate-400 text-center py-4",children:e?"未找到匹配的结果。":"暂无分组数据。"})]})}function b({searchQuery:e}){let[t,s]=(0,l.useState)(!1),[n,o]=(0,l.useState)(null),[d,c]=(0,l.useState)(!1),[u,h]=(0,l.useState)({username:"",password:"",role:"USER"}),[b,g]=(0,l.useState)({role:"USER",password:""}),v=(0,i.jE)(),{data:j=[],isLoading:y}=(0,a.I)({queryKey:["users"],queryFn:async()=>(await m.i$.getUsers()).data.data}),w=x({mutationFn:m.i$.createUser,onSuccess:()=>{v.invalidateQueries({queryKey:["users"]}),s(!1),h({username:"",password:"",role:"USER"})}}),f=x({mutationFn:({username:e,data:t})=>m.i$.updateUser(e,t),onSuccess:()=>{v.invalidateQueries({queryKey:["users"]}),o(null),c(!1)}}),N=x({mutationFn:m.i$.deleteUser,onSuccess:()=>{v.invalidateQueries({queryKey:["users"]})}}),_=e=>{if(e.preventDefault(),n){let e={role:b.role};d&&b.password&&""!==b.password.trim()&&(e.password=b.password),f.mutate({username:n,data:e})}},k=e=>{o(e.username),g({role:e.role,password:""}),c(!1)},C=j.filter(t=>""===e||t.username.toLowerCase().includes(e.toLowerCase())||t.role.toLowerCase().includes(e.toLowerCase()));return y?(0,r.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,r.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-500"})}):(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold",children:"用户账户管理"}),(0,r.jsxs)("button",{onClick:()=>s(!0),className:"bg-purple-500 hover:bg-purple-600 px-3 py-1.5 rounded text-sm flex items-center",children:[(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1",viewBox:"0 0 20 20",fill:"currentColor",children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M10 5a1 1 0 011 1v3h3a1 1 0 110 2h-3v3a1 1 0 11-2 0v-3H6a1 1 0 110-2h3V6a1 1 0 011-1z",clipRule:"evenodd"})}),"添加用户"]})]}),t&&(0,r.jsxs)("div",{className:"mb-8 p-4 bg-slate-700 rounded-lg shadow-lg",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-3",children:[(0,r.jsx)("h3",{className:"text-lg font-medium text-blue-400",children:"添加新用户"}),(0,r.jsx)("button",{onClick:()=>s(!1),className:"text-slate-400 hover:text-white",children:"\xd7"})]}),(0,r.jsxs)("form",{onSubmit:e=>{e.preventDefault(),w.mutate(u)},className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm text-slate-300",children:"用户名"}),(0,r.jsx)("input",{type:"text",value:u.username,onChange:e=>h({...u,username:e.target.value}),required:!0,className:"mt-1 w-full bg-slate-800 border-slate-600 rounded px-3 py-2 text-white"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm text-slate-300",children:"密码"}),(0,r.jsx)("input",{type:"password",value:u.password,onChange:e=>h({...u,password:e.target.value}),required:!0,className:"mt-1 w-full bg-slate-800 border-slate-600 rounded px-3 py-2 text-white"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm text-slate-300",children:"角色"}),(0,r.jsxs)("select",{value:u.role,onChange:e=>h({...u,role:e.target.value}),className:"mt-1 w-full bg-slate-800 border-slate-600 rounded px-3 py-2 text-white",children:[(0,r.jsx)("option",{value:"USER",children:"普通用户 (User)"}),(0,r.jsx)("option",{value:"ADMIN",children:"管理员 (Admin)"})]})]}),(0,r.jsx)("button",{type:"submit",disabled:w.isPending,className:"bg-blue-500 hover:bg-blue-600 px-4 py-2 rounded text-sm",children:w.isPending?"创建中...":"创建用户"}),w.error&&(0,r.jsx)("p",{className:"text-red-400 text-sm mt-2",children:w.error.message})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-lg font-medium mb-3 text-blue-400",children:"现有用户列表"}),(0,r.jsx)("div",{className:"space-y-4",children:C.map(t=>(0,r.jsx)("div",{className:"p-4 bg-slate-700 rounded-lg",children:n===t.username?(0,r.jsxs)("div",{className:"p-3 bg-slate-600 rounded",children:[(0,r.jsxs)("h4",{className:"text-lg font-medium mb-3 text-blue-400",children:["编辑用户:",(0,r.jsx)(p,{text:t.username,searchQuery:e,className:"ml-2 text-lg font-medium"})]}),(0,r.jsxs)("form",{onSubmit:_,className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm text-slate-300 mb-2",children:"角色"}),(0,r.jsxs)("select",{value:b.role,onChange:e=>g({...b,role:e.target.value}),className:"w-full bg-slate-800 border border-slate-600 rounded px-3 py-2 text-white",children:[(0,r.jsx)("option",{value:"USER",children:"普通用户 (User)"}),(0,r.jsx)("option",{value:"ADMIN",children:"管理员 (Admin)"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,r.jsx)("label",{className:"block text-sm text-slate-300",children:"密码"}),(0,r.jsx)("button",{type:"button",onClick:()=>c(!d),className:"text-xs text-blue-400 hover:text-blue-300",children:d?"取消修改密码":"修改密码"})]}),d&&(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("input",{type:"password",value:b.password,onChange:e=>g({...b,password:e.target.value}),placeholder:"输入新密码（留空表示不修改）",className:"w-full bg-slate-800 border border-slate-600 rounded px-3 py-2 text-white"}),(0,r.jsx)("p",{className:"text-xs text-slate-400",children:"⚠️ 管理员权限：修改密码将影响用户登录，请谨慎操作"})]})]}),(0,r.jsxs)("div",{className:"flex space-x-2",children:[(0,r.jsx)("button",{type:"submit",disabled:f.isPending,className:"bg-green-500 hover:bg-green-600 px-4 py-2 rounded text-sm",children:f.isPending?"保存中...":"保存"}),(0,r.jsx)("button",{type:"button",onClick:()=>{o(null),c(!1)},className:"bg-gray-500 hover:bg-gray-600 px-4 py-2 rounded text-sm",children:"取消"})]})]}),f.error&&(0,r.jsx)("p",{className:"text-red-400 text-sm mt-2",children:f.error.message})]}):(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsx)("div",{className:"w-12 h-12 bg-slate-600 rounded-full flex items-center justify-center",children:(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-slate-300",viewBox:"0 0 20 20",fill:"currentColor",children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z",clipRule:"evenodd"})})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"font-bold text-white text-lg",children:(0,r.jsx)(p,{text:t.username,searchQuery:e,className:"text-lg font-bold"})}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-sm font-medium ${"ADMIN"===t.role?"bg-purple-100 text-purple-800":"bg-blue-100 text-blue-800"}`,children:(0,r.jsx)(p,{text:"ADMIN"===t.role?"管理员":"普通用户",searchQuery:e,className:"text-sm font-medium"})}),(0,r.jsxs)("span",{className:"text-slate-400 text-sm",children:["创建于 ",new Date(t.createdAt).toLocaleDateString()]})]})]})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsxs)("button",{onClick:()=>k(t),className:"bg-yellow-500 hover:bg-yellow-600 px-3 py-1 rounded text-sm flex items-center",children:[(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3 w-3 mr-1",viewBox:"0 0 20 20",fill:"currentColor",children:(0,r.jsx)("path",{d:"M13.586 3.586a2 2 0 112.828 2.828l-.793.793-2.828-2.828.793-.793zM11.379 5.793L3 14.172V17h2.828l8.38-8.379-2.83-2.828z"})}),"编辑"]}),(0,r.jsxs)("button",{onClick:()=>N.mutate(t.username),disabled:N.isPending,className:"bg-red-500 hover:bg-red-600 px-3 py-1 rounded text-sm flex items-center",children:[(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3 w-3 mr-1",viewBox:"0 0 20 20",fill:"currentColor",children:[(0,r.jsx)("path",{fillRule:"evenodd",d:"M9 2a1 1 0 000 2h2a1 1 0 100-2H9z",clipRule:"evenodd"}),(0,r.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})]}),"删除"]})]})]})},t.id))}),0===C.length&&(0,r.jsx)("p",{className:"text-slate-400 text-center py-4 text-lg",children:e?(0,r.jsxs)(r.Fragment,{children:['未找到匹配 "',(0,r.jsx)("span",{className:"bg-yellow-300 text-yellow-900 px-1 rounded font-semibold",children:e}),'" 的用户。']}):"暂无用户数据。"})]}),(0,r.jsx)("div",{className:"mt-6 p-4 bg-yellow-500/10 border border-yellow-500/50 rounded-lg",children:(0,r.jsxs)("div",{className:"flex items-start space-x-2",children:[(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-yellow-500 mt-0.5",viewBox:"0 0 20 20",fill:"currentColor",children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"text-yellow-500 font-medium text-sm",children:"安全提示"}),(0,r.jsxs)("p",{className:"text-yellow-400 text-xs mt-1",children:["• 只有管理员可以编辑用户信息和密码",(0,r.jsx)("br",{}),"• 修改密码后，该用户需要使用新密码重新登录",(0,r.jsx)("br",{}),"• 删除用户操作不可撤销，请谨慎操作"]})]})]})})]})}function g({searchQuery:e}){let[t,s]=(0,l.useState)(!1),[n,o]=(0,l.useState)({site_title:"",site_heading:"",site_subheading:"",nav_welcome_text:"",nav_admin_button:"",nav_logout_button:"",login_title:"",login_subtitle:"",login_username_placeholder:"",login_password_placeholder:"",login_submit_button:"",login_error_invalid:"",login_error_network:"",login_dev_notice_title:"",login_dev_admin_label:"",login_dev_user_label:"",login_copyright:"",signout_title:"",signout_subtitle:"",signout_description:"",signout_confirm_button:"",signout_cancel_button:"",signout_warning:"",signout_loading_text:"",signout_copyright:"",home_section_title:"",admin_title:"",admin_preview_button:"",admin_logout_button:"",loading_text:"",error_text:"",success_text:"",cancel_text:"",confirm_text:"",save_text:"",edit_text:"",delete_text:"",add_text:""}),d=(0,i.jE)(),{data:c,isLoading:u}=(0,a.I)({queryKey:["settings"],queryFn:async()=>(await m.aK.getSettings()).data.data}),h=x({mutationFn:m.aK.updateSettings,onSuccess:()=>{d.invalidateQueries({queryKey:["settings"]}),s(!0),setTimeout(()=>{s(!1)},3e3)}}),b=e=>{e.preventDefault(),h.mutate(n)},g=(e,t)=>{o(s=>({...s,[e]:t}))},v=[{title:"基本站点信息",items:[{key:"site_title",label:"网站标题",description:"显示在浏览器标签页的标题",placeholder:"例如：AI-Link-Navigator - 智能导航站"},{key:"site_heading",label:"网站主标题",description:"显示在网站首页的大标题",placeholder:"例如：AI资源导航"},{key:"site_subheading",label:"网站副标题",description:"显示在主标题下方的描述文字",placeholder:"例如：前沿AI工具与资源的精选集合"}]},{title:"导航栏文字",items:[{key:"nav_welcome_text",label:"欢迎文字",description:"导航栏的欢迎用户文字",placeholder:"例如：欢迎回来"},{key:"nav_admin_button",label:"管理后台按钮",description:"管理后台按钮的文字",placeholder:"例如：管理后台"},{key:"nav_logout_button",label:"退出登录按钮",description:"退出登录按钮的文字",placeholder:"例如：退出登录"}]},{title:"登录页面文字",items:[{key:"login_title",label:"登录页标题",description:"登录页面的主标题",placeholder:"例如：AI导航系统"},{key:"login_subtitle",label:"登录页副标题",description:"登录页面的副标题",placeholder:"例如：智能资源导航平台"},{key:"login_username_placeholder",label:"用户名输入框提示",description:"用户名输入框的占位符文字",placeholder:"例如：请输入用户名"},{key:"login_password_placeholder",label:"密码输入框提示",description:"密码输入框的占位符文字",placeholder:"例如：请输入密码"},{key:"login_submit_button",label:"登录按钮文字",description:"登录按钮的文字",placeholder:"例如：立即登录"},{key:"login_error_invalid",label:"登录错误提示",description:"用户名或密码错误时的提示",placeholder:"例如：用户名或密码错误"},{key:"login_error_network",label:"网络错误提示",description:"网络错误时的提示",placeholder:"例如：登录过程中发生错误，请稍后重试"},{key:"login_dev_notice_title",label:"开发环境提示标题",description:"开发环境测试账号提示的标题",placeholder:"例如：开发环境 - 测试账号"},{key:"login_dev_admin_label",label:"测试管理员账号标签",description:"测试管理员账号的标签",placeholder:"例如：管理员"},{key:"login_dev_user_label",label:"测试用户账号标签",description:"测试用户账号的标签",placeholder:"例如：用户"},{key:"login_copyright",label:"登录页版权信息",description:"登录页面底部的版权信息",placeholder:"例如：\xa9 2024 AI-Link-Navigator. 现代化智能导航平台"}]},{title:"退出登录页面文字",items:[{key:"signout_title",label:"退出确认标题",description:"退出登录确认页面的标题",placeholder:"例如：退出确认"},{key:"signout_subtitle",label:"退出确认副标题",description:"退出登录确认页面的副标题",placeholder:"例如：您确定要退出登录吗？"},{key:"signout_description",label:"退出说明文字",description:"退出登录的说明文字",placeholder:"例如：退出后您需要重新登录才能访问系统"},{key:"signout_confirm_button",label:"确认退出按钮",description:"确认退出按钮的文字",placeholder:"例如：确认退出"},{key:"signout_cancel_button",label:"取消退出按钮",description:"取消退出按钮的文字",placeholder:"例如：取消"},{key:"signout_warning",label:"退出警告信息",description:"退出时的警告信息",placeholder:"例如：退出后所有未保存的数据将丢失"},{key:"signout_loading_text",label:"退出中文字",description:"正在退出时显示的文字",placeholder:"例如：正在退出..."},{key:"signout_copyright",label:"退出页版权信息",description:"退出页面底部的版权信息",placeholder:"例如：\xa9 2024 AI-Link-Navigator. 安全退出系统"}]},{title:"主页文字",items:[{key:"home_section_title",label:"资源分类标题",description:"主页资源分类部分的标题",placeholder:"例如：资源分类"}]},{title:"管理后台文字",items:[{key:"admin_title",label:"管理后台标题",description:"管理后台页面的标题",placeholder:"例如：AI导航管理后台"},{key:"admin_preview_button",label:"预览网站按钮",description:"预览网站按钮的文字",placeholder:"例如：预览网站"},{key:"admin_logout_button",label:"管理后台退出按钮",description:"管理后台退出登录按钮的文字",placeholder:"例如：退出登录"}]},{title:"通用文字",items:[{key:"loading_text",label:"加载中文字",description:"页面加载时显示的文字",placeholder:"例如：加载中..."},{key:"error_text",label:"错误提示文字",description:"一般错误提示的文字",placeholder:"例如：发生错误"},{key:"success_text",label:"成功提示文字",description:"操作成功提示的文字",placeholder:"例如：操作成功"},{key:"cancel_text",label:"取消按钮文字",description:"取消按钮的文字",placeholder:"例如：取消"},{key:"confirm_text",label:"确认按钮文字",description:"确认按钮的文字",placeholder:"例如：确认"},{key:"save_text",label:"保存按钮文字",description:"保存按钮的文字",placeholder:"例如：保存"},{key:"edit_text",label:"编辑按钮文字",description:"编辑按钮的文字",placeholder:"例如：编辑"},{key:"delete_text",label:"删除按钮文字",description:"删除按钮的文字",placeholder:"例如：删除"},{key:"add_text",label:"添加按钮文字",description:"添加按钮的文字",placeholder:"例如：添加"}]}].map(t=>({...t,items:t.items.filter(t=>{if(!e)return!0;let s=e.toLowerCase();return t.label.toLowerCase().includes(s)||t.description.toLowerCase().includes(s)||n[t.key]&&n[t.key].toLowerCase().includes(s)})})).filter(e=>e.items.length>0);return u?(0,r.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,r.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-500"})}):(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold mb-2",children:"网站文字设置"}),(0,r.jsx)("p",{className:"text-slate-400 text-base",children:"配置网站各个页面的文字内容，这些设置会立即应用到对应页面上"})]}),(0,r.jsxs)("form",{onSubmit:b,className:"space-y-8 pb-20",children:[v.map(t=>(0,r.jsxs)("div",{className:"p-6 bg-slate-700 rounded-lg border border-slate-600",children:[(0,r.jsxs)("h3",{className:"text-lg font-semibold text-white mb-4 flex items-center",children:[(0,r.jsx)("div",{className:"w-1 h-5 bg-gradient-to-b from-blue-400 to-purple-500 rounded-full mr-3"}),t.title]}),(0,r.jsx)("div",{className:"space-y-4",children:t.items.map(t=>(0,r.jsxs)("div",{className:"p-4 bg-slate-800 rounded-lg",children:[(0,r.jsxs)("div",{className:"mb-3",children:[(0,r.jsx)("label",{className:"block text-base font-semibold text-white mb-1",children:(0,r.jsx)(p,{text:t.label,searchQuery:e,className:"text-base font-semibold"})}),(0,r.jsx)("p",{className:"text-slate-400 text-sm",children:(0,r.jsx)(p,{text:t.description,searchQuery:e,className:"text-sm"})})]}),(0,r.jsx)("input",{type:"text",value:n[t.key]||"",onChange:e=>g(t.key,e.target.value),placeholder:t.placeholder,className:"w-full bg-slate-900 border border-slate-600 rounded-lg px-4 py-3 text-white text-sm placeholder-slate-400 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none"}),n[t.key]&&(0,r.jsxs)("div",{className:"mt-2 p-3 bg-slate-600 rounded border-l-4 border-blue-500",children:[(0,r.jsx)("p",{className:"text-slate-300 text-xs mb-1",children:"当前值预览："}),(0,r.jsx)("p",{className:"text-white text-sm font-medium",children:(0,r.jsx)(p,{text:n[t.key]||"",searchQuery:e,className:"text-sm font-medium"})})]})]},t.key))})]},t.title)),0===v.length&&(0,r.jsx)("div",{className:"text-center py-8",children:(0,r.jsxs)("p",{className:"text-slate-400 text-lg",children:['未找到匹配 "',(0,r.jsx)("span",{className:"bg-yellow-300 text-yellow-900 px-1 rounded font-semibold",children:e}),'" 的设置项。']})}),t&&(0,r.jsxs)("div",{className:"fixed top-4 right-4 z-50 p-4 bg-green-500 text-white rounded-lg shadow-lg flex items-center animate-fade-in",children:[(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",viewBox:"0 0 20 20",fill:"currentColor",children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}),(0,r.jsx)("span",{className:"font-medium",children:"设置已成功保存！"}),(0,r.jsx)("button",{onClick:()=>s(!1),className:"ml-4 text-white hover:text-green-200",children:(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor",children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]}),h.isError&&(0,r.jsx)("div",{className:"p-4 bg-red-500/10 border border-red-500/50 rounded-lg",children:(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-red-500 mr-2",viewBox:"0 0 20 20",fill:"currentColor",children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),(0,r.jsx)("span",{className:"text-red-400 font-medium",children:"保存失败，请稍后重试"})]})})]}),v.length>0&&(0,r.jsx)("div",{className:"fixed right-6 bottom-6 z-50",children:(0,r.jsx)("button",{type:"submit",form:"settings-form",onClick:b,disabled:h.isPending,className:"bg-blue-500 hover:bg-blue-600 disabled:opacity-50 px-6 py-4 rounded-full text-white font-medium flex items-center shadow-lg hover:shadow-xl transition-all duration-200 transform hover:scale-105",children:h.isPending?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,r.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,r.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"保存中..."]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",viewBox:"0 0 20 20",fill:"currentColor",children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}),"保存设置"]})})})]})}var v=s(48616),j=s.n(v);function y(){let[e,t]=(0,l.useState)("links"),[s,i]=(0,l.useState)(""),[a,n]=(0,l.useState)({});return(0,r.jsxs)("div",{className:"max-w-6xl mx-auto p-6 md:p-8",children:[(0,r.jsxs)("header",{className:"mb-8",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold",children:a.admin_title||"AI导航管理后台"}),(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsxs)(j(),{href:"/",className:"text-blue-400 hover:text-blue-300 flex items-center",target:"_blank",rel:"noopener noreferrer",children:[(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1",viewBox:"0 0 20 20",fill:"currentColor",children:[(0,r.jsx)("path",{d:"M10 12a2 2 0 100-4 2 2 0 000 4z"}),(0,r.jsx)("path",{fillRule:"evenodd",d:"M.458 10C1.732 5.943 5.522 3 10 3s8.268 2.943 9.542 7c-1.274 4.057-5.064 7-9.542 7S1.732 14.057.458 10zM14 10a4 4 0 11-8 0 4 4 0 018 0z",clipRule:"evenodd"})]}),a.admin_preview_button||"预览网站"]}),(0,r.jsxs)(j(),{href:"/api/auth/signout",className:"text-red-400 hover:text-red-300 flex items-center",children:[(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1",viewBox:"0 0 20 20",fill:"currentColor",children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M3 3a1 1 0 00-1 1v12a1 1 0 102 0V4a1 1 0 00-1-1zm10.293 9.293a1 1 0 001.414 1.414l3-3a1 1 0 000-1.414l-3-3a1 1 0 10-1.414 1.414L14.586 9H7a1 1 0 100 2h7.586l-1.293 1.293z",clipRule:"evenodd"})}),a.admin_logout_button||"退出登录"]})]})]}),(0,r.jsx)("div",{className:"mb-6",children:(0,r.jsx)("input",{type:"text",placeholder:"在当前标签页内搜索...",value:s,onChange:e=>i(e.target.value),className:"w-full bg-slate-800 border border-slate-600 rounded px-4 py-2 text-white placeholder-slate-400 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none"})})]}),(0,r.jsx)("div",{className:"mb-6 border-b border-slate-700",children:[{id:"links",label:"链接管理"},{id:"users",label:"用户管理"},{id:"settings",label:"网站文字设置"}].map(s=>(0,r.jsx)("button",{onClick:()=>t(s.id),className:`px-4 py-2 mr-2 rounded-t-md transition-colors ${e===s.id?"bg-slate-800 text-white border-b-2 border-blue-500":"bg-slate-600 text-slate-300 hover:bg-slate-500"}`,children:s.label},s.id))}),(0,r.jsxs)("main",{className:"bg-slate-800 rounded-xl p-6",children:["links"===e&&(0,r.jsx)(h,{searchQuery:s}),"users"===e&&(0,r.jsx)(b,{searchQuery:s}),"settings"===e&&(0,r.jsx)(g,{searchQuery:s})]})]})}},40524:(e,t,s)=>{"use strict";s.d(t,{GA:()=>i,aK:()=>n,i$:()=>l,v_:()=>a});let r=s(91479).A.create({baseURL:"/api",timeout:1e4});r.interceptors.response.use(e=>e,e=>(e.response?.status===401&&(window.location.href="/auth/login"),Promise.reject(e)));let l={getUsers:()=>r.get("/users"),createUser:e=>r.post("/users",e),updateUser:(e,t)=>r.put(`/users/${e}`,t),deleteUser:e=>r.delete(`/users/${e}`)},i={getGroups:()=>r.get("/groups"),createGroup:e=>r.post("/groups",e),updateGroup:(e,t)=>r.put(`/groups/${e}`,t),deleteGroup:e=>r.delete(`/groups/${e}`)},a={createLink:e=>r.post("/links",e),updateLink:(e,t)=>r.put(`/links/${e}`,t),deleteLink:e=>r.delete(`/links/${e}`)},n={getSettings:()=>r.get("/settings"),updateSettings:e=>r.post("/settings",e)}},63494:(e,t,s)=>{"use strict";s.d(t,{Providers:()=>o});var r=s(76181),l=s(68458),i=s(30235),a=s(88039),n=s(73616);function o({children:e}){let[t]=(0,n.useState)(()=>new l.E({defaultOptions:{queries:{staleTime:6e4,retry:1}}}));return(0,r.jsx)(a.SessionProvider,{children:(0,r.jsx)(i.Ht,{client:t,children:e})})}},32465:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>o});var r=s(22865),l=s(65760),i=s(65355),a=s(1955),n=s(20838);async function o(){let e=await (0,i.getServerSession)(a.N);return e||(0,l.redirect)("/auth/login"),"ADMIN"!==e.user.role&&(0,l.redirect)("/"),(0,r.jsx)("div",{className:"min-h-screen bg-slate-900 text-white",children:(0,r.jsx)(n.AdminDashboard,{})})}},37774:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>c,generateMetadata:()=>d});var r=s(22865),l=s(74744),i=s.n(l),a=s(62490),n=s(97342);async function o(){try{let e=await n.z.setting.findUnique({where:{key:"site_title"}});return e?.value||"AI-Link-Navigator"}catch(e){return console.error("Error fetching site title:",e),"AI-Link-Navigator"}}async function d(){return{title:await o(),description:"现代化AI资源导航平台"}}function c({children:e}){return(0,r.jsx)("html",{lang:"zh-CN",children:(0,r.jsx)("body",{className:i().className,children:(0,r.jsx)(a.Providers,{children:e})})})}s(55268)},20838:(e,t,s)=>{"use strict";s.d(t,{AdminDashboard:()=>r});let r=(0,s(16199).registerClientReference)(function(){throw Error("Attempted to call AdminDashboard() from the server but AdminDashboard is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/raojiajun/mypro/server/python/AI-Link-Navigator/src/components/features/AdminDashboard.tsx","AdminDashboard")},1955:(e,t,s)=>{"use strict";s.d(t,{N:()=>a});var r=s(63024),l=s(28672),i=s(97342);let a={providers:[(0,r.A)({id:"credentials",name:"credentials",credentials:{username:{label:"Username",type:"text"},password:{label:"Password",type:"password"}},async authorize(e){if(!e?.username||!e?.password)return null;try{let t=await i.z.user.findUnique({where:{username:e.username}});if(!t||!await (0,l.UD)(e.password,t.password))return null;return{id:t.id,username:t.username,role:t.role}}catch(e){return console.error("Authentication error:",e),null}}})],callbacks:{jwt:async({token:e,user:t})=>(t&&(e.id=t.id,e.username=t.username,e.role=t.role),e),session:async({session:e,token:t})=>(t&&(e.user={id:t.id,username:t.username,role:t.role}),e)},pages:{signIn:"/auth/login",signOut:"/auth/signout"},session:{strategy:"jwt"},secret:process.env.NEXTAUTH_SECRET}},97342:(e,t,s)=>{"use strict";s.d(t,{z:()=>l});let r=require("@prisma/client"),l=globalThis.prisma??new r.PrismaClient},62490:(e,t,s)=>{"use strict";s.d(t,{Providers:()=>r});let r=(0,s(16199).registerClientReference)(function(){throw Error("Attempted to call Providers() from the server but Providers is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/raojiajun/mypro/server/python/AI-Link-Navigator/src/lib/utils/providers.tsx","Providers")},6019:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>l});var r=s(33534);let l=async e=>[{type:"image/x-icon",sizes:"16x16",url:(0,r.fillMetadataSegment)(".",await e.params,"favicon.ico")+""}]},55268:()=>{}};var t=require("../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[639,609,550,534,110],()=>s(16662));module.exports=r})();